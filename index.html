<!DOCTYPE html>
	<head>
		<title>Net Neutrality Data Statistics</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="The results of an analysis on the Net Neutralitie's data release" />
		<meta name="author" content="Ethan Eldridge">
		<meta name="keywords" content="Ethan,Eldridge,Joachim,net,neutrality,analysis,bigdata,big,data,mining,sentiment"/>
		<meta name="viewport" content="width=device-width,  initial-scale=1" />
		<style type="text/css">
			body{
				padding: 0;
				margin: 0;
				background-color: cornsilk;
			}
			header{
				text-align: center;
				width: 100%;
				padding: 10px;
				margin: 0;
				background-color: cadetblue;
			}
			header h1{
				display: inline-block;
				margin-bottom: 5px;
			}
			header p{
				margin-top: 5px;
			}
			h3[name="more"]{
				padding: 5px;
				margin: 0 auto;
				width: 100%;
				text-align: center;
				background-color: black;
				color: white;
			}
			section{
				vertical-align: top;
				display: inline-block;
			}
			section[name="sentiment"]{
				padding-left: 10px;
				width: 30%;
			}
			section[name="demograph"]{
				width: 55%;
			}
		</style>
	</head>
	<body>
		<header>
			<h1>Net Neutrality Analysis</h1>
			<sup>By <a href="http://www.ethanjoachimeeldridge.info">Ethan J. Eldridge</a></sup>
			<p>
				Welcome, to a page dedicated to investigating the opinions of others! Below you will find (hopefully)interesting analysis and 
				statistics about the <a href="http://www.fcc.gov/files/ecfs/14-28/ecfs-files.htm">FCC's released comments archive</a>.
			</p>
		</header>
		<h3 name="more">More Data Coming soon!</h3>
		<section name="sentiment">
			<h2>Sentiment Analysis with <a href="https://github.com/EJEHardenberg/netNeutrality/blob/master/sentiment.py">Python</a></h2>
			<p>
				Positive Wordings are listed in <span style="color: blue;">blue<br/>
				Negative Wordings are listed in <span style="color:  red;">red</span>
			</p>
			<canvas width="300px" height="400px" data-pos="" data-neg="215964" id="sentimentpie"></canvas>
			<p>
				Using <a href="http://www.nltk.org">nltk</a> a python natural language toolkit, I used the movie_review text classifier (73-80% accuracy, same as a human) to guage the positive and negative wordings of the comments made by people to the FCC.
				Unsurprisingly, most of them are negative as a great many people who have written in want <strong>real</strong> Net  Neutrality.
			</p>
			
		</section>
		<section name="demograph">
			<h2>Demographic Analysis with <a href="https://github.com/EJEHardenberg/netNeutrality/blob/master/sentiment.py">Python lxml</a></h2>
			<div id="usmap" style="width: 500; height: 400px;"></div>
			<p>
				Using the parser lxml, I aggregated all the state information to get an overall count of participation by state. Simple stuff, but informative. Unsurprisingly, California (the biggest tech hub) was the most vocal in protest.
			</p>
			<h3>Top 10 Participants:</h3>
			<ul name="participants"></ul>
		</section>
		
	</body>
	
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/Chart.js/0.2.0/Chart.min.js"></script>
	<script type="text/javascript">
		var sentiCanvas = document.getElementById("sentimentpie").getContext("2d")
		new Chart(sentiCanvas).Pie([{
			value: 30755,
			color: "blue",
			highlight: "cadetblue",
			label: "Positive Wording"
		},{
			value: 215964,
			color: "red",
			highlight: "crimson",
			label: "Negative Wording"
		}],{ 
			showScale: true,
			scaleShowLabels: true,
			scaleLabel: "<%=value%>",

			legendTemplate : "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<segments.length; i++){%><li><span style=\"background-color:<%=segments[i].fillColor%>\"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>"
		})
	</script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript" src="us-map-1.0.1/lib/raphael.js"></script>
	<script type="text/javascript" src="us-map-1.0.1/example/color.jquery.js"></script>
	<script type="text/javascript" src="us-map-1.0.1/jquery.usmap.js"></script>

	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/amcharts/3.10.0/amcharts.js"></script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/ammaps/3.10.0/ammap.js"></script>
	<script type="text/javascript" src="http://www.amcharts.com/lib/3/maps/js/usaLow.js"></script>
	<script type="text/javascript" src="http://www.amcharts.com/lib/3/themes/light.js"></script>

	<script type="text/javascript">
		
		//generated by states.py
		statesDemo =	{'WA': 11067, 'DE': 897, 'DC': 1209, 'WI': 4136, 'WV': 858, 'HI': 1103, 'FL': 12273, 'FM': 10, 'AK': 970, 'NH': 1991, 'NJ': 6182, 'NM': 1950, 'TX': 14191, 'LA': 1668, 'NC': 5860, 'ND': 455, 'NE': 1160, 'TN': 3730, 'NY': 17529, 'PA': 9253, 'WY': 410, 'RI': 842, 'NV': 2118, 'VA': 6432, 'GU': 57, 'CO': 6838, 'PW': 25, 'VI': 136, 'CA': 39472, 'AL': 1915, 'AS': 11, 'AR': 1273, 'VT': 1006, 'IL': 9967, 'GA': 5472, 'IN': 3966, 'IA': 2073, 'OK': 1847, 'AZ': 5879, 'ID': 1306, 'CT': 2777, 'ME': 1606, 'MD': 5049, 'MA': 7935, 'OH': 7143, 'UT': 2737, 'MO': 3712, 'MN': 5084, 'MI': 7010, 'MH': 8, 'KS': 1895, 'MT': 903, 'MP': 10, 'MS': 783, 'PR': 383, 'SC': 2004, 'KY': 2264, 'OR': 6929, 'SD': 670}


		var areas = []
		var sorted = []
		for(code in statesDemo){
			areas.push({
				id: "US-" + code,
				value: statesDemo[code],
			})
			sorted.push({code: code, val: statesDemo[code]})
		}

		var sorted = sorted.sort(function(i,v){
			return i.val == v.val ? 0 : i.val < v.val ? -1 : 1;
		})		


		var n = 0;
		for (var i = sorted.length - 1; i >= 0; i--) {
			if(n >= 10){
				break;
			}
			var val = sorted[i]
			$('[name="participants"]').append("<li>"+ val.code + ": " + val.val + " comments</li>")  	
			n++
		};
		

		var map = AmCharts.makeChart("usmap", {
			type: "map",
    		"theme": "light",
    		pathToImages: "http://www.amcharts.com/lib/3/images/",
			colorSteps: 10,
			dataProvider: {
				map: "usaLow",
				areas: areas
			},
			areasSettings: {
			autoZoom: true
			},

			valueLegend: {
				right: 10,
				minValue: "8 (MH)",
				maxValue: "39472 (CA)"
			}
		});
	</script>
</html>
